Bootstrap: docker
From: python:3.8-bullseye

%setup
    cp festival.py ${SINGULARITY_ROOTFS}/festival.py

%post
    apt-get -y update
    apt-get -y install git
    apt-get -y install vim
    apt-get -y install screen
    apt-get -y install libsndfile1
    apt-get -y install espeak
    apt-get -y install ffmpeg
    python -m pip install --upgrade pip
    pip install ffmpeg
    pip install appdirs==1.4.4 attrs==21.2.0 audioread==2.1.9 certifi==2021.5.30 cffi==1.14.6 charset-normalizer==2.0.4 clean-text==0.5.0 clldutils==3.9.0 colorlog==6.4.1 csvw==1.11.0 cycler==0.10.0 Cython==0.29.24 decorator==5.0.9 editdistance==0.5.3 emoji==1.4.2 ftfy==6.0.3 future==0.18.2 graphviz==0.17 idna==3.2 isodate==0.6.0 joblib==1.0.1 kiwisolver==1.3.2 librosa==0.8.1 llvmlite==0.37.0 matplotlib==3.4.3 munkres==1.1.4 numba==0.54.0 numpy==1.20.3 packaging==21.0 Pillow==8.3.2 pooch==1.5.1 pycparser==2.20 pyloudnorm==0.1.0 pyparsing==2.4.7 python-dateutil==2.8.2 pyworld==0.3.0 PyYAML==5.4.1 regex==2021.8.28 requests==2.26.0 resampy==0.2.2 rfc3986==1.5.0 scikit-learn==0.24.2 scipy==1.7.1 segments==2.2.0 six==1.16.0 sounddevice==0.4.2 SoundFile==0.10.3.post1 tabulate==0.8.9 threadpoolctl==2.2.0 torch-complex==0.2.1 torchaudio==0.9.0 torchviz==0.0.2 tqdm==4.62.2 typing-extensions==3.10.0.2 unicodecsv==0.14.1 Unidecode==1.2.0 uritemplate==3.0.1 urllib3==1.26.6 wcwidth==0.2.5 speechbrain==0.5.10 unsilence auraloss

    pip install torch==1.9.0+cu111 torchvision==0.10.0+cu111 torchaudio==0.9.0 -f https://download.pytorch.org/whl/torch_stable.html

    ln -s /usr/lib/x86_64-linux-gnu/libtinfo.so /usr/lib/libtinfo.so.5
